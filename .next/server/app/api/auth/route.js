"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/route";
exports.ids = ["app/api/auth/route"];
exports.modules = {

/***/ "better-sqlite3":
/*!*********************************!*\
  !*** external "better-sqlite3" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("better-sqlite3");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "oslo":
/*!***********************!*\
  !*** external "oslo" ***!
  \***********************/
/***/ ((module) => {

module.exports = import("oslo");;

/***/ }),

/***/ "oslo/cookie":
/*!******************************!*\
  !*** external "oslo/cookie" ***!
  \******************************/
/***/ ((module) => {

module.exports = import("oslo/cookie");;

/***/ }),

/***/ "oslo/crypto":
/*!******************************!*\
  !*** external "oslo/crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = import("oslo/crypto");;

/***/ }),

/***/ "oslo/encoding":
/*!********************************!*\
  !*** external "oslo/encoding" ***!
  \********************************/
/***/ ((module) => {

module.exports = import("oslo/encoding");;

/***/ }),

/***/ "oslo/request":
/*!*******************************!*\
  !*** external "oslo/request" ***!
  \*******************************/
/***/ ((module) => {

module.exports = import("oslo/request");;

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Froute&page=%2Fapi%2Fauth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Froute.ts&appDir=D%3A%5CJetbrains%5CFun%5CAida_20%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CJetbrains%5CFun%5CAida_20&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Froute&page=%2Fapi%2Fauth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Froute.ts&appDir=D%3A%5CJetbrains%5CFun%5CAida_20%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CJetbrains%5CFun%5CAida_20&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_Jetbrains_Fun_Aida_20_src_app_api_auth_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/auth/route.ts */ \"(rsc)/./src/app/api/auth/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([D_Jetbrains_Fun_Aida_20_src_app_api_auth_route_ts__WEBPACK_IMPORTED_MODULE_3__]);\nD_Jetbrains_Fun_Aida_20_src_app_api_auth_route_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/route\",\n        pathname: \"/api/auth\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/route\"\n    },\n    resolvedPagePath: \"D:\\\\Jetbrains\\\\Fun\\\\Aida_20\\\\src\\\\app\\\\api\\\\auth\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_Jetbrains_Fun_Aida_20_src_app_api_auth_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/auth/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhdXRoJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYXV0aCUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDSmV0YnJhaW5zJTVDRnVuJTVDQWlkYV8yMCU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9RCUzQSU1Q0pldGJyYWlucyU1Q0Z1biU1Q0FpZGFfMjAmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ1U7QUFDdkY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hdXRoLXByb2plY3QvP2QwZjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiRDpcXFxcSmV0YnJhaW5zXFxcXEZ1blxcXFxBaWRhXzIwXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGF1dGhcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2F1dGgvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hdXRoXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hdXRoL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiRDpcXFxcSmV0YnJhaW5zXFxcXEZ1blxcXFxBaWRhXzIwXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGF1dGhcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2F1dGgvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Froute&page=%2Fapi%2Fauth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Froute.ts&appDir=D%3A%5CJetbrains%5CFun%5CAida_20%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CJetbrains%5CFun%5CAida_20&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/auth/route.ts":
/*!***********************************!*\
  !*** ./src/app/api/auth/route.ts ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   lucia: () => (/* binding */ lucia)\n/* harmony export */ });\n/* harmony import */ var _lucia_auth_adapter_sqlite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lucia-auth/adapter-sqlite */ \"(rsc)/./node_modules/@lucia-auth/adapter-sqlite/dist/index.js\");\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! better-sqlite3 */ \"better-sqlite3\");\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(better_sqlite3__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var lucia__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lucia */ \"(rsc)/./node_modules/lucia/dist/index.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/api */ \"(rsc)/./src/app/lib/api.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([lucia__WEBPACK_IMPORTED_MODULE_2__]);\nlucia__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\nconst db = new (better_sqlite3__WEBPACK_IMPORTED_MODULE_1___default())(\"auth.db\");\nconst adapter = new _lucia_auth_adapter_sqlite__WEBPACK_IMPORTED_MODULE_0__.BetterSqlite3Adapter(db, {\n    user: \"users\",\n    session: \"session\"\n});\nconst lucia = new lucia__WEBPACK_IMPORTED_MODULE_2__.Lucia(adapter, {\n    sessionExpiresIn: new lucia__WEBPACK_IMPORTED_MODULE_2__.TimeSpan(30, 's'),\n    sessionCookie: {\n        expires: false,\n        attributes: {\n            secure: \"development\" === \"production\"\n        }\n    }\n});\nasync function GET(req) {\n    const sessionCookie = (0,next_headers__WEBPACK_IMPORTED_MODULE_3__.cookies)().get(lucia.sessionCookieName);\n    if (!sessionCookie) {\n        return Response.json({\n            user: null,\n            session: null\n        });\n    }\n    const result = await lucia.validateSession(sessionCookie.value);\n    if (!result.session) {\n        return Response.json({\n            user: null,\n            session: null\n        });\n    }\n    try {\n        if (result.session) {\n            const sessionCookie = lucia.createSessionCookie(result.session.id);\n            (0,next_headers__WEBPACK_IMPORTED_MODULE_3__.cookies)().set(sessionCookie.name, sessionCookie.value, sessionCookie.attributes);\n        } else {\n            const sessionCookie = lucia.createBlankSessionCookie();\n            (0,next_headers__WEBPACK_IMPORTED_MODULE_3__.cookies)().set(sessionCookie.name, sessionCookie.value, sessionCookie.attributes);\n        }\n    } catch  {}\n    const user = (0,_lib_api__WEBPACK_IMPORTED_MODULE_4__.getUserById)(result.session.userId);\n    if (user) {\n        return Response.json({\n            user,\n            session: result.session\n        });\n    }\n    return Response.json({\n        user: null,\n        session: null\n    });\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hdXRoL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQWtFO0FBQzVCO0FBQ0U7QUFDRDtBQUNLO0FBRTVDLE1BQU1NLEtBQUssSUFBSUwsdURBQVFBLENBQUM7QUFDeEIsTUFBTU0sVUFBVSxJQUFJUCw0RUFBb0JBLENBQUNNLElBQUk7SUFDekNFLE1BQU07SUFDTkMsU0FBUztBQUNiO0FBRU8sTUFBTUMsUUFBUSxJQUFJUix3Q0FBS0EsQ0FBQ0ssU0FBUztJQUNwQ0ksa0JBQWtCLElBQUlSLDJDQUFRQSxDQUFDLElBQUk7SUFDbkNTLGVBQWU7UUFDWEMsU0FBUztRQUNUQyxZQUFZO1lBQ1JDLFFBQVFDLGtCQUF5QjtRQUNyQztJQUNKO0FBQ0osR0FBRztBQUVJLGVBQWVDLElBQUlDLEdBQVc7SUFDakMsTUFBTU4sZ0JBQWdCUixxREFBT0EsR0FBR2UsR0FBRyxDQUFDVCxNQUFNVSxpQkFBaUI7SUFDM0QsSUFBSSxDQUFDUixlQUFlO1FBQ2hCLE9BQU9TLFNBQVNDLElBQUksQ0FBQztZQUNqQmQsTUFBTTtZQUNOQyxTQUFTO1FBQ2I7SUFDSjtJQUNBLE1BQU1jLFNBQVMsTUFBTWIsTUFBTWMsZUFBZSxDQUFDWixjQUFjYSxLQUFLO0lBQzlELElBQUksQ0FBQ0YsT0FBT2QsT0FBTyxFQUFFO1FBQ2pCLE9BQU9ZLFNBQVNDLElBQUksQ0FBQztZQUNqQmQsTUFBTTtZQUNOQyxTQUFTO1FBQ2I7SUFDSjtJQUNBLElBQUk7UUFDQSxJQUFJYyxPQUFPZCxPQUFPLEVBQUU7WUFDaEIsTUFBTUcsZ0JBQWdCRixNQUFNZ0IsbUJBQW1CLENBQUNILE9BQU9kLE9BQU8sQ0FBQ2tCLEVBQUU7WUFFakV2QixxREFBT0EsR0FBR3dCLEdBQUcsQ0FDVGhCLGNBQWNpQixJQUFJLEVBQ2xCakIsY0FBY2EsS0FBSyxFQUNuQmIsY0FBY0UsVUFBVTtRQUVoQyxPQUFPO1lBQ0gsTUFBTUYsZ0JBQWdCRixNQUFNb0Isd0JBQXdCO1lBRXBEMUIscURBQU9BLEdBQUd3QixHQUFHLENBQ1RoQixjQUFjaUIsSUFBSSxFQUNsQmpCLGNBQWNhLEtBQUssRUFDbkJiLGNBQWNFLFVBQVU7UUFFaEM7SUFDSixFQUFFLE9BQU0sQ0FBRTtJQUVWLE1BQU1OLE9BQU9ILHFEQUFXQSxDQUFDa0IsT0FBT2QsT0FBTyxDQUFDc0IsTUFBTTtJQUM5QyxJQUFJdkIsTUFBTTtRQUNOLE9BQU9hLFNBQVNDLElBQUksQ0FBQztZQUNqQmQ7WUFDQUMsU0FBU2MsT0FBT2QsT0FBTztRQUMzQjtJQUNKO0lBRUEsT0FBT1ksU0FBU0MsSUFBSSxDQUFDO1FBQ2pCZCxNQUFNO1FBQ05DLFNBQVM7SUFDYjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXV0aC1wcm9qZWN0Ly4vc3JjL2FwcC9hcGkvYXV0aC9yb3V0ZS50cz9hNzY2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJldHRlclNxbGl0ZTNBZGFwdGVyIH0gZnJvbSAnQGx1Y2lhLWF1dGgvYWRhcHRlci1zcWxpdGUnO1xyXG5pbXBvcnQgRGF0YWJhc2UgZnJvbSAnYmV0dGVyLXNxbGl0ZTMnO1xyXG5pbXBvcnQgeyBMdWNpYSwgVGltZVNwYW4gfSBmcm9tICdsdWNpYSc7XHJcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnO1xyXG5pbXBvcnQgeyBnZXRVc2VyQnlJZCB9IGZyb20gJy4uLy4uL2xpYi9hcGknO1xyXG5cclxuY29uc3QgZGIgPSBuZXcgRGF0YWJhc2UoXCJhdXRoLmRiXCIpO1xyXG5jb25zdCBhZGFwdGVyID0gbmV3IEJldHRlclNxbGl0ZTNBZGFwdGVyKGRiLCB7XHJcbiAgICB1c2VyOiBcInVzZXJzXCIsXHJcbiAgICBzZXNzaW9uOiBcInNlc3Npb25cIlxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBsdWNpYSA9IG5ldyBMdWNpYShhZGFwdGVyLCB7XHJcbiAgICBzZXNzaW9uRXhwaXJlc0luOiBuZXcgVGltZVNwYW4oMzAsICdzJyksXHJcbiAgICBzZXNzaW9uQ29va2llOiB7XHJcbiAgICAgICAgZXhwaXJlczogZmFsc2UsXHJcbiAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIlxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSk7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcTpSZXF1ZXN0KXtcclxuICAgIGNvbnN0IHNlc3Npb25Db29raWUgPSBjb29raWVzKCkuZ2V0KGx1Y2lhLnNlc3Npb25Db29raWVOYW1lKTtcclxuICAgIGlmICghc2Vzc2lvbkNvb2tpZSkge1xyXG4gICAgICAgIHJldHVybiBSZXNwb25zZS5qc29uKHtcclxuICAgICAgICAgICAgdXNlcjogbnVsbCxcclxuICAgICAgICAgICAgc2Vzc2lvbjogbnVsbFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbHVjaWEudmFsaWRhdGVTZXNzaW9uKHNlc3Npb25Db29raWUudmFsdWUpO1xyXG4gICAgaWYgKCFyZXN1bHQuc2Vzc2lvbikge1xyXG4gICAgICAgIHJldHVybiBSZXNwb25zZS5qc29uKHtcclxuICAgICAgICAgICAgdXNlcjogbnVsbCxcclxuICAgICAgICAgICAgc2Vzc2lvbjogbnVsbFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICBpZiAocmVzdWx0LnNlc3Npb24pIHtcclxuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbkNvb2tpZSA9IGx1Y2lhLmNyZWF0ZVNlc3Npb25Db29raWUocmVzdWx0LnNlc3Npb24uaWQpO1xyXG5cclxuICAgICAgICAgICAgY29va2llcygpLnNldChcclxuICAgICAgICAgICAgICAgIHNlc3Npb25Db29raWUubmFtZSxcclxuICAgICAgICAgICAgICAgIHNlc3Npb25Db29raWUudmFsdWUsXHJcbiAgICAgICAgICAgICAgICBzZXNzaW9uQ29va2llLmF0dHJpYnV0ZXNcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uQ29va2llID0gbHVjaWEuY3JlYXRlQmxhbmtTZXNzaW9uQ29va2llKCk7XHJcblxyXG4gICAgICAgICAgICBjb29raWVzKCkuc2V0KFxyXG4gICAgICAgICAgICAgICAgc2Vzc2lvbkNvb2tpZS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgc2Vzc2lvbkNvb2tpZS52YWx1ZSxcclxuICAgICAgICAgICAgICAgIHNlc3Npb25Db29raWUuYXR0cmlidXRlc1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH0gY2F0Y2ggeyB9XHJcblxyXG4gICAgY29uc3QgdXNlciA9IGdldFVzZXJCeUlkKHJlc3VsdC5zZXNzaW9uLnVzZXJJZCk7XHJcbiAgICBpZiAodXNlcikge1xyXG4gICAgICAgIHJldHVybiBSZXNwb25zZS5qc29uKHtcclxuICAgICAgICAgICAgdXNlcixcclxuICAgICAgICAgICAgc2Vzc2lvbjogcmVzdWx0LnNlc3Npb25cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgdXNlcjogbnVsbCxcclxuICAgICAgICBzZXNzaW9uOiBudWxsXHJcbiAgICB9KTtcclxufSJdLCJuYW1lcyI6WyJCZXR0ZXJTcWxpdGUzQWRhcHRlciIsIkRhdGFiYXNlIiwiTHVjaWEiLCJUaW1lU3BhbiIsImNvb2tpZXMiLCJnZXRVc2VyQnlJZCIsImRiIiwiYWRhcHRlciIsInVzZXIiLCJzZXNzaW9uIiwibHVjaWEiLCJzZXNzaW9uRXhwaXJlc0luIiwic2Vzc2lvbkNvb2tpZSIsImV4cGlyZXMiLCJhdHRyaWJ1dGVzIiwic2VjdXJlIiwicHJvY2VzcyIsIkdFVCIsInJlcSIsImdldCIsInNlc3Npb25Db29raWVOYW1lIiwiUmVzcG9uc2UiLCJqc29uIiwicmVzdWx0IiwidmFsaWRhdGVTZXNzaW9uIiwidmFsdWUiLCJjcmVhdGVTZXNzaW9uQ29va2llIiwiaWQiLCJzZXQiLCJuYW1lIiwiY3JlYXRlQmxhbmtTZXNzaW9uQ29va2llIiwidXNlcklkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/auth/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/lib/api.ts":
/*!****************************!*\
  !*** ./src/app/lib/api.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addUser: () => (/* binding */ addUser),\n/* harmony export */   getAllUsers: () => (/* binding */ getAllUsers),\n/* harmony export */   getUserById: () => (/* binding */ getUserById),\n/* harmony export */   getUserByLogin: () => (/* binding */ getUserByLogin),\n/* harmony export */   updateUserLogin: () => (/* binding */ updateUserLogin)\n/* harmony export */ });\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-sqlite3 */ \"better-sqlite3\");\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(better_sqlite3__WEBPACK_IMPORTED_MODULE_0__);\n\nconst authDB = new (better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default())(\"auth.db\");\nconst addUser = (user)=>{\n    return authDB.prepare(`\n                INSERT INTO users(id, name, surname, login, password)\n                VALUES(@id, @name, @surname, @login, @password)\n            `).run(user);\n};\nconst getAllUsers = ()=>{\n    return authDB.prepare(\"SELECT * FROM users\").all();\n};\nconst getUserByLogin = (login)=>{\n    const result = authDB.prepare(\"SELECT * FROM users WHERE login =?\").get(login);\n    if (result) {\n        return result;\n    }\n    return null;\n};\nconst getUserById = (id)=>{\n    const result = authDB.prepare(\"SELECT * FROM users where id=?\").get(id);\n    if (result) {\n        return result;\n    }\n    return null;\n};\nconst updateUserLogin = (id, newLogin)=>{\n    return authDB.prepare(\"UPDATE users SET login = ? WHERE id = ?\").run(newLogin, id);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2xpYi9hcGkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUNxQztBQUVyQyxNQUFNQyxTQUFTLElBQUlELHVEQUFRQSxDQUFDO0FBRXJCLE1BQU1FLFVBQVUsQ0FBQ0M7SUFDcEIsT0FBT0YsT0FDRkcsT0FBTyxDQUFDLENBQUM7OztZQUdOLENBQUMsRUFBRUMsR0FBRyxDQUFDRjtBQUNuQixFQUFDO0FBRU0sTUFBTUcsY0FBYztJQUN2QixPQUFPTCxPQUFPRyxPQUFPLENBQUMsdUJBQXVCRyxHQUFHO0FBQ3BELEVBQUM7QUFFTSxNQUFNQyxpQkFBaUIsQ0FBQ0M7SUFDM0IsTUFBTUMsU0FBU1QsT0FDVkcsT0FBTyxDQUFDLHNDQUNSTyxHQUFHLENBQUNGO0lBQ1QsSUFBSUMsUUFBUTtRQUNSLE9BQU9BO0lBQ1g7SUFDQSxPQUFPO0FBQ1gsRUFBQztBQUVNLE1BQU1FLGNBQWMsQ0FBQ0M7SUFDeEIsTUFBTUgsU0FBU1QsT0FDVkcsT0FBTyxDQUFDLGtDQUNSTyxHQUFHLENBQUNFO0lBQ1QsSUFBSUgsUUFBUTtRQUNSLE9BQU9BO0lBQ1g7SUFDQSxPQUFPO0FBQ1gsRUFBQztBQUVNLE1BQU1JLGtCQUFrQixDQUFDRCxJQUFZRTtJQUN4QyxPQUFPZCxPQUNGRyxPQUFPLENBQUMsMkNBQ1JDLEdBQUcsQ0FBQ1UsVUFBVUY7QUFDdkIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2F1dGgtcHJvamVjdC8uL3NyYy9hcHAvbGliL2FwaS50cz80NTAwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElVc2VyLCBPcHRpb25hbFVzZXIgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IERhdGFiYXNlIGZyb20gJ2JldHRlci1zcWxpdGUzJ1xuXG5jb25zdCBhdXRoREIgPSBuZXcgRGF0YWJhc2UoXCJhdXRoLmRiXCIpXG5cbmV4cG9ydCBjb25zdCBhZGRVc2VyID0gKHVzZXI6IE9wdGlvbmFsVXNlcik6IERhdGFiYXNlLlJ1blJlc3VsdCA9PiB7XG4gICAgcmV0dXJuIGF1dGhEQlxuICAgICAgICAucHJlcGFyZShgXG4gICAgICAgICAgICAgICAgSU5TRVJUIElOVE8gdXNlcnMoaWQsIG5hbWUsIHN1cm5hbWUsIGxvZ2luLCBwYXNzd29yZClcbiAgICAgICAgICAgICAgICBWQUxVRVMoQGlkLCBAbmFtZSwgQHN1cm5hbWUsIEBsb2dpbiwgQHBhc3N3b3JkKVxuICAgICAgICAgICAgYCkucnVuKHVzZXIpXG59XG5cbmV4cG9ydCBjb25zdCBnZXRBbGxVc2VycyA9ICgpOiBJVXNlcltdID0+IHtcbiAgICByZXR1cm4gYXV0aERCLnByZXBhcmUoXCJTRUxFQ1QgKiBGUk9NIHVzZXJzXCIpLmFsbCgpIGFzIElVc2VyW11cbn1cblxuZXhwb3J0IGNvbnN0IGdldFVzZXJCeUxvZ2luID0gKGxvZ2luOiBzdHJpbmcpOiBJVXNlciB8IG51bGwgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF1dGhEQlxuICAgICAgICAucHJlcGFyZShcIlNFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgbG9naW4gPT9cIilcbiAgICAgICAgLmdldChsb2dpbilcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgYXMgSVVzZXJcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbn1cblxuZXhwb3J0IGNvbnN0IGdldFVzZXJCeUlkID0gKGlkOiBzdHJpbmcpOiBJVXNlciB8IG51bGwgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF1dGhEQlxuICAgICAgICAucHJlcGFyZShcIlNFTEVDVCAqIEZST00gdXNlcnMgd2hlcmUgaWQ9P1wiKVxuICAgICAgICAuZ2V0KGlkKVxuICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCBhcyBJVXNlclxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxufVxuXG5leHBvcnQgY29uc3QgdXBkYXRlVXNlckxvZ2luID0gKGlkOiBzdHJpbmcsIG5ld0xvZ2luOiBzdHJpbmcpOiBEYXRhYmFzZS5SdW5SZXN1bHQgPT4ge1xuICAgIHJldHVybiBhdXRoREJcbiAgICAgICAgLnByZXBhcmUoXCJVUERBVEUgdXNlcnMgU0VUIGxvZ2luID0gPyBXSEVSRSBpZCA9ID9cIilcbiAgICAgICAgLnJ1bihuZXdMb2dpbiwgaWQpXG59Il0sIm5hbWVzIjpbIkRhdGFiYXNlIiwiYXV0aERCIiwiYWRkVXNlciIsInVzZXIiLCJwcmVwYXJlIiwicnVuIiwiZ2V0QWxsVXNlcnMiLCJhbGwiLCJnZXRVc2VyQnlMb2dpbiIsImxvZ2luIiwicmVzdWx0IiwiZ2V0IiwiZ2V0VXNlckJ5SWQiLCJpZCIsInVwZGF0ZVVzZXJMb2dpbiIsIm5ld0xvZ2luIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/lib/api.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/lucia","vendor-chunks/@lucia-auth"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Froute&page=%2Fapi%2Fauth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Froute.ts&appDir=D%3A%5CJetbrains%5CFun%5CAida_20%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CJetbrains%5CFun%5CAida_20&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();